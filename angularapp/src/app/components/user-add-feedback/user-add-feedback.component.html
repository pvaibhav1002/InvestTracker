<h2>Add Feedback</h2>

<form [formGroup]="feedbackForm" (ngSubmit)="submitFeedback()">

  <!-- Name -->
  <div>
    <label for="name">Your Name:</label>
    <input type="text" id="name" formControlName="name" placeholder="Enter your name" />
    <div *ngIf="f.name.invalid && (f.name.touched || f.name.dirty)">
      <small *ngIf="f.name.errors?.required">Name is required.</small>
    </div>
  </div>

  <!-- Email -->
  <div>
    <label for="email">Your Email:</label>
    <input type="email" id="email" formControlName="email" placeholder="Enter your email" />
    <div *ngIf="f.email.invalid && (f.email.touched || f.email.dirty)">
      <small *ngIf="f.email.errors?.required">Email is required.</small>
      <small *ngIf="f.email.errors?.email">Please enter a valid email address.</small>
    </div>
  </div>

  <!-- Category Selection -->
  <div>
    <label for="category">Feedback Category:</label>
    <select id="category" formControlName="category">
      <option value="">-- Select Category --</option>
      <option value="General">General</option>
      <option value="Portfolio">Portfolio</option>
      <option value="Assets">Assets</option>
    </select>
    <div *ngIf="f.category.invalid && (f.category.touched || f.category.dirty)">
      <div *ngIf="f.category.errors?.required">Category is required</div>
    </div>
  </div>

  <!-- Investment Selection (only for Assets) -->
  <div *ngIf="feedbackForm.get('category')?.value === 'Assets'">
    <label for="investmentId">Select Investment:</label>
    <select id="investmentId" formControlName="investmentId">
      <option value="">Select Investment</option>
      <option *ngFor="let investment of investments" [value]="investment.investmentId">
        {{ investment.name }}
      </option>
    </select>
    <div *ngIf="f.investmentId.invalid && (f.investmentId.touched || f.investmentId.dirty)">
      <div *ngIf="f.investmentId.errors?.required">Investment is required</div>
    </div>
  </div>

  <!-- Feedback Message -->
  <div>
    <label for="message">Feedback Message:</label>
    <textarea id="message" formControlName="message" placeholder="Enter your feedback"></textarea>
    <div *ngIf="f.message.invalid && f.message.touched">
      <small *ngIf="f.message.errors?.required">Message is required.</small>
      <small *ngIf="f.message.errors?.minlength">Message must be at least 10 characters.</small>
    </div>
  </div>

  <!-- Submit and Cancel Buttons -->
  <div>
    <button type="submit" [disabled]="feedbackForm.invalid">Submit Feedback</button>
    <button type="button" (click)="cancel()">Cancel</button>
  </div>

</form>
