<body>
  <div class="add-container">
    <div class="form-container" id="formContainer">

      <form  id="investmentForm" class="form" [formGroup]="feedbackForm" (ngSubmit)="submitFeedback()">
        <h2 class="form-title">Add Feedback</h2>

        <!-- Name -->
        <div  class="form-group">
          <label for="name">Your Name:</label>
          <input type="text" id="name" class="form-input" formControlName="name" placeholder="Enter your name" />
          <div class="error-message" *ngIf="f.name.invalid && (f.name.touched || f.name.dirty)">
            <small *ngIf="f.name.errors?.required">Name is required.</small>
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Your Email:</label>
          <input type="email" id="email" class="form-input" formControlName="email" placeholder="Enter your email" />
          <div class="error-message" *ngIf="f.email.invalid && (f.email.touched || f.email.dirty)">
            <small *ngIf="f.email.errors?.required">Email is required.</small>
            <small *ngIf="f.email.errors?.email">Please enter a valid email address.</small>
          </div>
        </div>

        <!-- Category Selection -->
        <div class="form-group">
          <label for="category">Feedback Category:</label>
          <select id="category" formControlName="category" class="form-input">
            <option value="">Select Category</option>
            <option value="General">General</option>
            <option value="Portfolio">Portfolio</option>
            <option value="Assets">Assets</option>
          </select>
          <div class="error-message" *ngIf="f.category.invalid && (f.category.touched || f.category.dirty)">
            <div *ngIf="f.category.errors?.required">Category is required</div>
          </div>
        </div>
        
        <!-- Investment Selection (only for Assets) -->
        <div class="form-group" *ngIf="feedbackForm.get('category')?.value === 'Assets'" class="form-group">
          <label for="category">Investment:</label>
          <select id="investmentId" formControlName="investmentId" class="form-input">
            <option selected value="">Select Investment</option>
            <option *ngFor="let investment of investments" [value]="investment.investmentId">
              {{ investment.name }}
            </option>
          </select>
          <div class="error-message" *ngIf="f.investmentId.invalid && (f.investmentId.touched || f.investmentId.dirty)">
            <div *ngIf="f.investmentId.errors?.required">Investment is required</div>
          </div>
        </div>

        <!-- Feedback Message -->
        <div class="form-group">
          <label for="message">Feedback Message:</label>
          <textarea id="message" class="form-input" formControlName="message" placeholder="Enter your feedback"></textarea>
          <div class="error-message" *ngIf="f.message.invalid && f.message.touched">
            <small *ngIf="f.message.errors?.required">Message is required.</small>
            <small *ngIf="f.message.errors?.minlength">Message must be at least 10 characters.</small>
          </div>
        </div>

        <!-- Submit and Cancel Buttons -->
        <div class="action-btn">
          <button type="submit" class="submit-button" [disabled]="feedbackForm.invalid">Submit Feedback</button>
          <button type="button" class="close-button" (click)="cancel()">Cancel</button>
        </div>

      </form>
    </div>

  </div>
</body>